---
title: "mta-daily-dataset-summary-stats"
output: html_document
date: "`r format(Sys.time(), '%Y-%m-%d')`"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
```

# Data Description
- Author:  ChengYu, Lee
- Date first created: 20251103
- Background: This dataset contains daily total ridership estimates for the MTA Subway, aggregated from hourly data.
- Unit of observation: Daily ridership estimates
- Sample period: July 2024 - June 2025
- Known issues: None reported
- Definition for each variable: 
    - Year: The year of the observation
    - Month: The month of the observation
    - Day of Week: The day of the week for the observation
    - Daily Ridership: The total ridership for the day 

```{r}
# ---- Draft R translation (please review) ----
library(dplyr)
library(readr)
library(tidyr)
library(ggplot2)
```

## MTA Daily Dataset

```{r}
base_path = "~/Documents/DataScience/fa-25-econ-5166-group-3/data/processed"
input_data_file = file.path(base_path, "mta_daily.csv")
```

```{r}
df = read_csv(input_data_file)
```

### Sample

```{r}
head(df)
```

### Summary Stats

```{r}
df$daily_sum %>%
  summary()
```

```{r}
df_agg <- df %>%
  filter(Year %in% c(2024, 2025), Month <= 6) %>%
  group_by(Year, Month) %>%
  summarise(monthly_sum = sum(daily_sum, na.rm = TRUE), .groups = "drop") %>%
  mutate(Year = as.factor(Year))

df_agg %>% 
  ggplot(aes(x = Month, y = monthly_sum, color = Year)) +
    geom_line(linewidth = 1.2) +
    geom_point(size = 3) +
    scale_x_continuous(breaks = 1:6) +
    labs(
      title = "Monthly Total MTA Ridership from Jan to June (2024-2025)",
      x = "Month",
      y = "Total Monthly Ridership",
      color = "Year"
    ) +
    theme_bw() +
    theme(
      plot.title = element_text(hjust = 0.5, size = 16, face = "bold"),
      axis.text = element_text(size = 12),
      axis.title = element_text(size = 14),
      legend.position = "bottom"
    )

```